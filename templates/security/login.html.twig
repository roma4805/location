{% extends 'base.html.twig' %}

{% block title %}Connexion{% endblock %}

{% block body %}
<style>
/* Page background */
.login-page {
    min-height: 100vh;
    background:
        linear-gradient(rgba(11,17,32,0.95), rgba(11,17,32,0.95)),
        url('https://images.unsplash.com/photo-1502877338535-766e1452684a');
    background-size: cover;
    background-position: center;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Poppins', sans-serif;
}

/* Login card */
.login-box {
    width: 420px;
    max-width: 95%;
    padding: 45px 40px;
    background: rgba(17,24,39,0.9);
    border-radius: 20px;
    box-shadow: 0 25px 60px rgba(0,0,0,0.6);
    color: #e5e7eb;
}

/* Title */
.login-box h1 {
    text-align: center;
    font-size: 30px;
    font-weight: 600;
    margin-bottom: 30px;
}

/* Labels */
.login-box label {
    font-size: 14px;
    margin-bottom: 6px;
    color: #cbd5f5;
}

/* Inputs */
.login-box .form-control {
    background: #0b1120;
    border: 1px solid rgba(255,255,255,0.15);
    border-radius: 14px;
    padding: 14px;
    color: #fff;
    font-size: 15px;
    margin-bottom: 18px;
}

.login-box .form-control:focus {
    background: #0b1120;
    border-color: #1e40af;
    box-shadow: 0 0 0 0.15rem rgba(30,64,175,0.4);
    color: #fff;
}

/* Checkbox */
.login-box .form-check-input {
    background-color: #0b1120;
    border-color: #1e40af;
}

.login-box .form-check-label {
    font-size: 14px;
}

/* Button */
.btn-login {
    width: 100%;
    padding: 15px;
    border-radius: 16px;
    background: linear-gradient(135deg, #1e40af, #1e3a8a);
    border: none;
    color: #fff;
    font-size: 17px;
    font-weight: 600;
    letter-spacing: 1px;
    transition: 0.4s;
}

.btn-login:hover {
    transform: translateY(-3px);
    box-shadow: 0 18px 35px rgba(30,64,175,0.6);
}

/* Alert */
.alert-danger {
    background: rgba(220,38,38,0.15);
    border: 1px solid rgba(220,38,38,0.4);
    color: #fecaca;
}

/* Logged in info */
.logged-box {
    background: rgba(30,64,175,0.15);
    padding: 12px;
    border-radius: 12px;
    margin-bottom: 20px;
    text-align: center;
    font-size: 14px;
}
</style>

<div class="login-page">
    <div class="login-box">

        {% if error %}
            <div class="alert alert-danger mb-3">
                {{ error.messageKey|trans(error.messageData, 'security') }}
            </div>
        {% endif %}

        {% if app.user %}
            <div class="logged-box">
                Connecté en tant que <strong>{{ app.user.userIdentifier }}</strong><br>
                <a href="{{ logout_path() }}" class="text-decoration-none text-light">Se déconnecter</a>
            </div>
        {% endif %}

        <h1>Connexion</h1>

        <form method="post">
            <label for="inputEmail">Adresse email</label>
            <input type="email"
                   name="email"
                   id="inputEmail"
                   class="form-control"
                   value="{{ last_username }}"
                   required autofocus>

            <label for="inputPassword">Mot de passe</label>
            <input type="password"
                   name="password"
                   id="inputPassword"
                   class="form-control"
                   required>

            <input type="hidden"
                   name="_csrf_token"
                   value="{{ csrf_token('authenticate') }}">

            <div class="form-check mb-4">
                <input class="form-check-input" type="checkbox" name="_remember_me" id="remember">
                <label class="form-check-label" for="remember">
                    Se souvenir de moi
                </label>
            </div>

            <button class="btn-login" type="submit">
                Se connecter
            </button>
        </form>
    </div>
</div>
{% endblock %}
